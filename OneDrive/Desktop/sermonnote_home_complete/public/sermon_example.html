<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<title>설교 작성 화면 - 퀵메모 연동 + 하단 버튼 포함</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  @import url('https://fonts.googleapis.com/css2?family=Nanum+Gothic&display=swap');
  * { box-sizing: border-box; }
  body {
    margin:0; padding:0;
    font-family:'Nanum Gothic', sans-serif;
    background: linear-gradient(135deg, #1c1c2b, #28313b);
    color:#f0e6d2;
    height: 100vh;
    display: flex;
  }
  .left-panel {
    width: 320px;
    background: rgba(30,30,42,0.85);
    padding: 20px;
    border-radius: 24px;
    box-shadow: 0 0 30px #ffc10744 inset;
    display: flex;
    flex-direction: column;
    gap: 25px;
    overflow-y: auto;
  }
  .left-panel label {
    font-weight: 700;
    margin-bottom: 6px;
    color: #ffe57f;
    text-shadow: 0 0 6px #ffd54f;
  }
  .left-panel input[type="text"], .left-panel select {
    width: 100%;
    padding: 10px;
    border-radius: 12px;
    border: none;
    font-size: 1rem;
    outline: none;
    transition: box-shadow 0.3s ease;
  }
  .left-panel input[type="text"]:focus, .left-panel select:focus {
    box-shadow: 0 0 10px #ffd54f;
  }
  .quickmemo-list, .hymn-list, .bible-list {
    background: #222;
    border-radius: 12px;
    padding: 10px;
    max-height: 180px;
    overflow-y: auto;
    color: #eee;
  }
  .quickmemo-item, .hymn-item, .bible-item {
    padding: 8px;
    border-radius: 8px;
    user-select: none;
    margin-bottom: 6px;
    background: #333;
    cursor: pointer;
    transition: background 0.2s ease;
  }
  .quickmemo-item:hover, .hymn-item:hover, .bible-item:hover {
    background: #444;
  }
  .button-group {
    display: flex;
    gap: 8px;
    margin-top: 6px;
  }
  button {
    cursor: pointer;
    user-select: none;
    border: none;
    border-radius: 10px;
    padding: 6px 12px;
    font-weight: 600;
    font-size: 0.85rem;
    transition: background-color 0.3s ease;
    background: linear-gradient(90deg, #ffeb3b, #fdd835);
    color: #222;
    box-shadow: 0 4px 10px rgba(253,216,53,0.7);
  }
  button:hover {
    background: linear-gradient(90deg, #fdd835, #ffeb3b);
    box-shadow: 0 6px 15px rgba(253,216,53,0.9);
  }
  button:active {
    transform: scale(0.95);
  }
  .right-panel {
    flex: 1;
    background: rgba(30,30,42,0.85);
    border-radius: 24px;
    padding: 30px;
    box-shadow: 0 0 50px #ffc10744 inset;
    display: flex;
    flex-direction: column;
    position: relative;
  }
  .right-panel label {
    font-weight: 700;
    font-size: 1.1rem;
    margin-bottom: 10px;
    color: #ffe57f;
    text-shadow: 0 0 8px #ffd54f;
  }
  .right-panel textarea {
    flex: 1;
    padding: 20px;
    font-size: 1.1rem;
    border-radius: 16px;
    border: none;
    resize: none;
    background: #1e1e2a;
    color: #eee;
    outline: none;
    box-shadow: inset 0 0 15px #ffc10744;
    transition: box-shadow 0.3s ease;
  }
  .right-panel textarea:focus {
    box-shadow: inset 0 0 25px #ffd54faa;
  }
  #micBtn {
    position: absolute;
    top: 30px;
    right: 30px;
    background-color: #ffeb3b;
    border: none;
    border-radius: 50%;
    width: 60px;
    height: 60px;
    cursor: pointer;
    box-shadow: 0 6px 20px rgba(251, 192, 45, 0.8);
    transition: background-color 0.3s ease, box-shadow 0.3s ease;
    display: flex;
    justify-content: center;
    align-items: center;
    user-select: none;
    z-index: 10;
  }
  #micBtn.active {
    background-color: #f44336;
    box-shadow: 0 8px 30px rgba(244, 67, 54, 0.9);
    animation: pulse 1.5s infinite;
  }
  @keyframes pulse {
    0% { box-shadow: 0 0 0 0 rgba(244, 67, 54, 0.7); }
    70% { box-shadow: 0 0 0 12px rgba(244, 67, 54, 0); }
    100% { box-shadow: 0 0 0 0 rgba(244, 67, 54, 0); }
  }
  #micIcon {
    width: 28px;
    height: 28px;
    fill: #222;
  }
  .bottom-btns {
    position: fixed;
    bottom: 15px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 14px;
    background: rgba(30,30,42,0.9);
    padding: 12px 20px;
    border-radius: 30px;
    box-shadow: 0 0 25px #ffc107cc;
    z-index: 1000;
  }
  .bottom-btns button {
    background: linear-gradient(90deg, #ffeb3b, #fdd835);
    color: #222;
    border: none;
    border-radius: 14px;
    padding: 12px 20px;
    font-weight: 700;
    font-size: 1rem;
    cursor: pointer;
    box-shadow: 0 6px 20px rgba(253,216,53,0.7);
    transition: background 0.3s ease, box-shadow 0.3s ease, transform 0.2s ease;
    user-select: none;
  }
  .bottom-btns button:hover {
    background: linear-gradient(90deg, #fdd835, #ffeb3b);
    box-shadow: 0 10px 30px rgba(253,216,53,0.85);
    transform: scale(1.05);
  }
  .bottom-btns button:active {
    transform: scale(0.98);
    box-shadow: 0 4px 15px rgba(253,216,53,0.5);
  }
  @media (max-width: 700px) {
    .bottom-btns {
      flex-direction: column;
      padding: 10px;
      gap: 10px;
    }
    .bottom-btns button {
      width: 100%;
      font-size: 1.1rem;
    }
  }
</style>
</head>
<body>

<div style="display:flex; height:100vh;">
  <div class="left-panel" aria-label="퀵메모 및 검색">
    
    <div>
      <label for="quickmemoSearch">퀵메모 찾기</label>
      <input type="text" id="quickmemoSearch" placeholder="퀵메모 제목 검색..." />
      <div class="quickmemo-list" id="quickmemoList"></div>
      <div class="button-group">
        <button id="editQuickmemoBtn">수정하기</button>
        <button id="saveQuickmemoBtn">저장하기</button>
      </div>
    </div>

    <div>
      <label for="bibleSearch">성경 말씀 찾기</label>
      <input type="text" id="bibleSearch" placeholder="성경 구절 또는 키워드 검색..." />
      <div class="bible-list" id="bibleList"></div>
      <div class="button-group">
        <button id="editBibleBtn">수정하기</button>
        <button id="saveBibleBtn">저장하기</button>
      </div>
    </div>

    <div>
      <label>찬송가</label>
      <div class="hymn-list" id="hymnList"></div>
      <div class="button-group">
        <button id="editHymnBtn">수정하기</button>
        <button id="saveHymnBtn">저장하기</button>
      </div>
    </div>

  </div>

  <div class="right-panel" aria-label="설교 작성">
    <label for="sermonContent">설교 내용 작성란</label>
    <textarea id="sermonContent" rows="18" placeholder="설교 내용을 작성하세요..."></textarea>
    <button id="micBtn" aria-label="음성 인식 시작/중지" title="음성으로 설교 내용 입력">🎤</button>
  </div>
</div>

<div class="bottom-btns" aria-label="설교 작업 버튼">
  <button id="btnEditBottom">수정하기</button>
  <button id="btnSaveBottom">저장하기</button>
  <button id="btnPrintBottom">인쇄</button>
  <button id="btnSendTabletBottom">테블릿/피시로 보내기</button>
  <button id="btnCreateBulletinBottom">주보 만들기</button>
</div>

<script>
  const sermonContent = document.getElementById('sermonContent');

  // 샘플 데이터
  const quickmemos = [
    "하나님의 은혜는 무한합니다.",
    "믿음은 시련을 견디게 합니다.",
    "사랑은 모든 것을 이깁니다."
  ];

  const bibleVerses = [
    "요한복음 3:16 - 하나님이 세상을 이처럼 사랑하사",
    "시편 23:1 - 여호와는 나의 목자시니",
    "빌립보서 4:13 - 내게 능력 주시는 자 안에서 내가 모든 것을 할 수 있느니라"
  ];

  const hymns = [
    "찬송가 1장 - 거룩 거룩 거룩",
    "찬송가 26장 - 주 예수 내 맘에 오심은",
    "찬송가 80장 - 예수 사랑하심은"
  ];

  // 리스트 출력 함수
  function renderList(list, containerId) {
    const container = document.getElementById(containerId);
    container.innerHTML = "";
    list.forEach((item, idx) => {
      const div = document.createElement("div");
      div.textContent = item;
      div.className = containerId.includes("quickmemo") ? "quickmemo-item" : containerId.includes("bible") ? "bible-item" : "hymn-item";
      div.dataset.idx = idx;
      container.appendChild(div);
    });
  }

  renderList(quickmemos, "quickmemoList");
  renderList(bibleVerses, "bibleList");
  renderList(hymns, "hymnList");

  // 선택된 아이템 인덱스 저장
  let selectedQuickmemoIndex = null;
  let selectedBibleIndex = null;
  let selectedHymnIndex = null;

  // 클릭 이벤트로 선택 관리
  function addSelectHandler(containerId, selectedIndexVarName) {
    const container = document.getElementById(containerId);
    container.addEventListener("click", (e) => {
      if(e.target && e.target.dataset.idx !== undefined) {
        // 선택된 아이템 강조
        Array.from(container.children).forEach(child => child.style.backgroundColor = "");
        e.target.style.backgroundColor = "#555";
        // 인덱스 저장
        window[selectedIndexVarName] = Number(e.target.dataset.idx);
      }
    });
  }

  addSelectHandler("quickmemoList", "selectedQuickmemoIndex");
  addSelectHandler("bibleList", "selectedBibleIndex");
  addSelectHandler("hymnList", "selectedHymnIndex");

  // 수정 버튼 기능: 선택된 아이템을 textarea에 불러오기
  document.getElementById("editQuickmemoBtn").onclick = () => {
    if(selectedQuickmemoIndex === null) {
      alert("퀵메모를 선택해 주세요.");
      return;
    }
    sermonContent.value = quickmemos[selectedQuickmemoIndex];
  };
  document.getElementById("editBibleBtn").onclick = () => {
    if(selectedBibleIndex === null) {
      alert("성경 말씀을 선택해 주세요.");
      return;
    }
    sermonContent.value = bibleVerses[selectedBibleIndex];
  };
  document.getElementById("editHymnBtn").onclick = () => {
    if(selectedHymnIndex === null) {
      alert("찬송가를 선택해 주세요.");
      return;
    }
    sermonContent.value = hymns[selectedHymnIndex];
  };

  // 저장 버튼 기능: textarea 내용 해당 리스트에 저장
  document.getElementById("saveQuickmemoBtn").onclick = () => {
    if(selectedQuickmemoIndex === null) {
      alert("퀵메모를 선택해 주세요.");
      return;
    }
    quickmemos[selectedQuickmemoIndex] = sermonContent.value.trim();
    renderList(quickmemos, "quickmemoList");
    alert("퀵메모가 저장되었습니다.");
  };
  document.getElementById("saveBibleBtn").onclick = () => {
    if(selectedBibleIndex === null) {
      alert("성경 말씀을 선택해 주세요.");
      return;
    }
    bibleVerses[selectedBibleIndex] = sermonContent.value.trim();
    renderList(bibleVerses, "bibleList");
    alert("성경 말씀이 저장되었습니다.");
  };
  document.getElementById("saveHymnBtn").onclick = () => {
    if(selectedHymnIndex === null) {
      alert("찬송가를 선택해 주세요.");
      return;
    }
    hymns[selectedHymnIndex] = sermonContent.value.trim();
    renderList(hymns, "hymnList");
    alert("찬송가가 저장되었습니다.");
  };

  // 음성 인식 설정 (생략 가능)
  // ...음성 인식 관련 스크립트가 여기 있으면 좋음...

  // 하단 버튼 이벤트 (예시)
  document.getElementById('btnEditBottom').onclick = () => alert('수정 기능 준비 중입니다.');
  document.getElementById('btnSaveBottom').onclick = () => alert('저장 기능 준비 중입니다.');
  document.getElementById('btnPrintBottom').onclick = () => window.print();
  document.getElementById('btnSendTabletBottom').onclick = () => alert('테블릿/피시 전송 기능 준비 중입니다.');
  document.getElementById('btnCreateBulletinBottom').onclick = () => alert('주보 만들기 기능 준비 중입니다.');
</script>

</body>
</html>
