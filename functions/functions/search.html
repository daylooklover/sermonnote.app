
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ì„±ê²½ êµ¬ì ˆ ê²€ìƒ‰ (KRV)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      font-family: 'Nanum Gothic', sans-serif;
      background: #f4f4f4;
      padding: 2em;
    }
    input, button {
      font-size: 1.2em;
      padding: 0.5em;
      margin: 0.5em 0;
    }
    #result {
      margin-top: 1em;
      white-space: pre-wrap;
      background: #fff;
      padding: 1em;
      border-radius: 8px;
      box-shadow: 0 0 5px #ccc;
    }
  </style>
</head>
<body>
  <h2>ğŸ“– í•œê¸€ ì„±ê²½ êµ¬ì ˆ ê²€ìƒ‰ (ê°œì—­í•œê¸€ KRV)</h2>
  <input type="text" id="searchInput" placeholder="ì˜ˆ: ìš”í•œë³µìŒ 3:16" />
  <button onclick="searchVerse()">êµ¬ì ˆ ê²€ìƒ‰</button>
  <div id="result">ì—¬ê¸°ì— ê²°ê³¼ê°€ í‘œì‹œë©ë‹ˆë‹¤.</div>

  <script src="bookMap.js"></script>
  <script>
    async function searchVerse() {
      const input = document.getElementById("searchInput").value.trim();
      const resultBox = document.getElementById("result");
      const match = input.match(/(\S+)\s*(\d+):(\d+)/);
      if (!match) {
        resultBox.innerText = "âš ï¸ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤. (ì˜ˆ: ìš”í•œë³µìŒ 3:16)";
        return;
      }
      const [_, bookKr, chapter, verse] = match;
      const bookEn = bookMap[bookKr];
      if (!bookEn) {
        resultBox.innerText = "âŒ í•´ë‹¹ ì„±ê²½ ì±…ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.";
        return;
      }

      const res = await fetch('krv_full_demo.json');
      const data = await res.json();
      const found = data.find(v =>
        v.book_en === bookEn &&
        v.chapter === parseInt(chapter) &&
        v.verse === parseInt(verse)
      );
      if (found) {
        resultBox.innerText = `ğŸ“˜ ${found.book_kr} ${found.chapter}:${found.verse}

${found.text}`;
      } else {
        resultBox.innerText = "âŒ í•´ë‹¹ êµ¬ì ˆì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.";
      }
    }
    async function getAICommentary(reference, text) {
  const response = await fetch("https://us-central1-YOUR_PROJECT.cloudfunctions.net/generateCommentary", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ reference, text })
  });
  const data = await response.json();
  return data.commentary;
}

  </script>
</body>
</html>
